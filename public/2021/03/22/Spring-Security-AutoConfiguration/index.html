
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hola">
    <title>Spring Security AutoConfiguration - Hola</title>
    <meta name="author" content="Sebastian Getts">
    
    
        <link rel="icon" href="http://github.com/sebastian/about/assets/images/avatar.png">
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Sebastian Getts","sameAs":["https://github.com/Sebastian-Getts","zzzqsw@gmail.com"],"image":"avatar.png"},"articleBody":"​        最近有设计权限模块，用到了Spring Security，在SpringBoot项目中导入了相关的jar包后几乎不用做任何配置（当然，除了启用的*@EnableWebSecurity*）就会拦截请求，达到了“安全“的目的，配置的方式也是多种多样，我们先从”方便使用“这个角度，看看他如何做到的”拆箱即用“。\n\n\n\n\n入口​        在SpringBoot中使用注解来解放xml配置文件后，一直都是*@Configuration的天下，开启一个模块的功能同样需要它。开头提到的那个注解@EnableWebSecurity*就是探究的入口：\n12345678910111213141516@Retention(value = java.lang.annotation.RetentionPolicy.RUNTIME)@Target(value = &#123; java.lang.annotation.ElementType.TYPE &#125;)@Documented@Import(&#123; WebSecurityConfiguration.class,\t\tSpringWebMvcImportSelector.class,\t\tOAuth2ImportSelector.class &#125;)@EnableGlobalAuthentication@Configurationpublic @interface EnableWebSecurity &#123;\t/**\t * Controls debugging support for Spring Security. Default is false.\t * @return if true, enables debug support with Spring Security\t */\tboolean debug() default false;&#125;\n\n我们看到通过*@Import(…)导入了三个class，后两个都是以Selector结尾，在命名规范的Spring源码中大概是可以猜出内容的：根据某个条件选择性地加载类，也就是动态地@Import(…)，这里我们不去关注Selector，从”方便使用“的角度，我们是来探究开箱即用的，所以着重看下第一个WebSecurityConfiguration*配置类。\n在进入第一个配置类之前有必要看一下这个注解的注释信息：\n\nAdd this annotation to an @Configuration class to have the Spring Security configuration defined in any WebSecurityConfigurer or more likely by extending the WebSecurityConfigurerAdapter base class and overriding individual methods\n\n告诉了我们如何使用以及自定义安全规则，那么使用起来应该是这样：\n123456789@EnableWebSecurity@Configurationpublic class MyWebSecurityConfiguration extends WebSecurityConfigurerAdapter &#123;        @Override    public void confugre(HttpSecurity httpSecurity)&#123;        // ....    &#125;&#125;\n\n下面我们进入配置类。\n配置类Spring Security从来不是单独存在的，正如他的名字一般，前面是有Spring的，Spring的核心就是IoC，所以，配置也是一样，一定会从把各个bean交代给容器。我们来看看他都做了啥。一进入类中，注释就讲得明明白白：\n\nUses a WebSecurity to create the FilterChainProxy that performs the web based security for Spring Security. It then exports the necessary beans. Customizations can be made to WebSecurity by extending WebSecurityConfigurerAdapter and exposing it as a Configuration or implementing WebSecurityConfigurer and exposing it as a Configuration. This configuration is imported when using EnableWebSecurity.\n\n我们都知道web请求是典型的责任链，或者说是过滤器链，在这个配置类中就注册了过滤器的持有类和相关配置，先看看他的准备工作：\nsetFilterChainProxySecurityConfigurer1234567891011121314151617181920212223242526272829303132333435@Autowired(required = false)public void setFilterChainProxySecurityConfigurer(    // 入参一    ObjectPostProcessor&lt;Object&gt; objectPostProcessor,    // 入参二    @Value(&quot;#&#123;@autowiredWebSecurityConfigurersIgnoreParents.getWebSecurityConfigurers()&#125;&quot;) List&lt;SecurityConfigurer&lt;Filter, WebSecurity&gt;&gt; webSecurityConfigurers)    throws Exception &#123;    webSecurity = objectPostProcessor        .postProcess(new WebSecurity(objectPostProcessor));    if (debugEnabled != null) &#123;        webSecurity.debug(debugEnabled);    &#125;        webSecurityConfigurers.sort(AnnotationAwareOrderComparator.INSTANCE);    Integer previousOrder = null;    Object previousConfig = null;    for (SecurityConfigurer&lt;Filter, WebSecurity&gt; config : webSecurityConfigurers) &#123;        Integer order = AnnotationAwareOrderComparator.lookupOrder(config);        if (previousOrder != null &amp;&amp; previousOrder.equals(order)) &#123;            throw new IllegalStateException(                &quot;@Order on WebSecurityConfigurers must be unique. Order of &quot;                + order + &quot; was already used on &quot; + previousConfig + &quot;, so it cannot be used on &quot;                + config + &quot; too.&quot;);        &#125;        previousOrder = order;        previousConfig = config;    &#125;    for (SecurityConfigurer&lt;Filter, WebSecurity&gt; webSecurityConfigurer : webSecurityConfigurers) &#123;        // 遍历webSecurityConfigures，执行webSecurity的apply        webSecurity.apply(webSecurityConfigurer);    &#125;    // 将confugures赋给势力变量    this.webSecurityConfigurers = webSecurityConfigurers;&#125;\n\n\n\ngetWebSecurityConfigurers入参二是有些奇怪的，实际上是执行了类AutowiredWebSecurityConfigurersIgnoreParents中的静态方法getWebSecurityConfigurers，目的是从上下文中获取到configures：\n123456789public List&lt;SecurityConfigurer&lt;Filter, WebSecurity&gt;&gt; getWebSecurityConfigurers() &#123;   List&lt;SecurityConfigurer&lt;Filter, WebSecurity&gt;&gt; webSecurityConfigurers = new ArrayList&lt;&gt;();   Map&lt;String, WebSecurityConfigurer&gt; beansOfType = beanFactory         .getBeansOfType(WebSecurityConfigurer.class);   for (Entry&lt;String, WebSecurityConfigurer&gt; entry : beansOfType.entrySet()) &#123;      webSecurityConfigurers.add(entry.getValue());   &#125;   return webSecurityConfigurers;&#125;\n\n\n\napply这里的apply是配置类中的属性webSecurity执行的，方法内实际的操作是”添加“，即把configures添加到容器中做保存，相当与是为webSecurity的属性赋值了。\n123456789101112131415private &lt;C extends SecurityConfigurer&lt;O, B&gt;&gt; void add(C configurer) &#123;    // ...    synchronized (configurers) &#123;        // ...        List&lt;SecurityConfigurer&lt;O, B&gt;&gt; configs = allowConfigurersOfSameType ? this.configurers            .get(clazz) : null;        if (configs == null) &#123;            configs = new ArrayList&lt;&gt;(1);        &#125;        configs.add(configurer);        // private final LinkedHashMap&lt;Class&lt;? extends SecurityConfigurer&lt;O, B&gt;&gt;, List&lt;SecurityConfigurer&lt;O, B&gt;&gt;&gt; configurers = new LinkedHashMap&lt;&gt;();        this.configurers.put(clazz, configs);        // ...    &#125;&#125;\n\n要知道，我们在入口处提到的用法，是在一个继承了抽象类的类上使用注解，并可以自定义安全规则，那个抽象类就是一个WebSecurityConfigurer，他实现了接口：\n123public abstract class WebSecurityConfigurerAdapter implements WebSecurityConfigurer&lt;WebSecurity&gt; &#123;    // ...&#125;\n\n所以可以总结一下这个方法：在这个配置类的这一方法中，我们实现的configurer会被方法getWebSecurityConfigurers从上下文中取出，经过排序等操作后填充至webSecurity的属性中保存。\nspringSecurityFilterChain准备工作之后是过滤器链。\n1234567891011121314151617// \tpublic static final String DEFAULT_FILTER_NAME = &quot;springSecurityFilterChain&quot;;@Bean(name = AbstractSecurityWebApplicationInitializer.DEFAULT_FILTER_NAME)public Filter springSecurityFilterChain() throws Exception &#123;    // 在上个方法中有给属性赋值，我们有继承的话 这里不为空，即true    boolean hasConfigurers = webSecurityConfigurers != null        &amp;&amp; !webSecurityConfigurers.isEmpty();    if (!hasConfigurers) &#123;        // 为空的话新建一个        WebSecurityConfigurerAdapter adapter = objectObjectPostProcessor            .postProcess(new WebSecurityConfigurerAdapter() &#123;            &#125;);        // 再次执行apply        webSecurity.apply(adapter);    &#125;    // 不为空的话 会直接执行这里的build方法    return webSecurity.build();&#125;\n\n到这里我们可以大致猜测他后续的步骤，最上面的demo中方法是configure，入参是httpSecurity，所以过滤器链也会与这些对象和方法有关，build也应该是构建过滤器链的。\n12345678910private AtomicBoolean building = new AtomicBoolean();public final O build() throws Exception &#123;    // 这里对build方法用了自旋CAS防止重复构建    if (this.building.compareAndSet(false, true)) &#123;        this.object = doBuild();        return this.object;    &#125;    throw new AlreadyBuiltException(&quot;This object has already been built&quot;);&#125;\n\n在*doBuild()*方法里用到了模板方法模式，同SpringBoot启动时做的refresh一样，给开发者留了余地，在构建前后都能实现一些方法，我们这里着重看看他内部实现了的。\ninit初始化，方法中会遍历configurer，其中包括我们自己实现的（假设我们继承了WebSecurityAdapter），那我们来看看init做了啥：\n12345678910public void init(final WebSecurity web) throws Exception &#123;    // 获取httpSecurity    final HttpSecurity http = getHttp();    // web是webSecurity的一个实例变量，通过获取的httpSecurity为其属性赋值    web.addSecurityFilterChainBuilder(http).postBuildAction(() -&gt; &#123;        FilterSecurityInterceptor securityInterceptor = http            .getSharedObject(FilterSecurityInterceptor.class);        web.securityInterceptor(securityInterceptor);    &#125;);&#125;\n\ngetHttp12345678910111213141516171819202122232425262728293031323334353637383940414243protected final HttpSecurity getHttp() throws Exception &#123;   if (http != null) &#123;      return http;   &#125;   AuthenticationEventPublisher eventPublisher = getAuthenticationEventPublisher();   localConfigureAuthenticationBldr.authenticationEventPublisher(eventPublisher);   AuthenticationManager authenticationManager = authenticationManager();   authenticationBuilder.parentAuthenticationManager(authenticationManager);   Map&lt;Class&lt;?&gt;, Object&gt; sharedObjects = createSharedObjects();    // 生成对象   http = new HttpSecurity(objectPostProcessor, authenticationBuilder,         sharedObjects);    // 默认的话 会生产默认的安全策略。就相当与我们什么都没有配置   if (!disableDefaults) &#123;      // @formatter:off      http         .csrf().and()         .addFilter(new WebAsyncManagerIntegrationFilter())         .exceptionHandling().and()         .headers().and()         .sessionManagement().and()         .securityContext().and()         .requestCache().and()         .anonymous().and()         .servletApi().and()         .apply(new DefaultLoginPageConfigurer&lt;&gt;()).and()         .logout();      // @formatter:on      ClassLoader classLoader = this.context.getClassLoader();      List&lt;AbstractHttpConfigurer&gt; defaultHttpConfigurers =            SpringFactoriesLoader.loadFactories(AbstractHttpConfigurer.class, classLoader);      for (AbstractHttpConfigurer configurer : defaultHttpConfigurers) &#123;         http.apply(configurer);      &#125;   &#125;    // 配置httpSecurity   configure(http);   return http;&#125;\n\n上面的方法中在返回httpSecurity对象之前会执行configure方法，是否记得demo以及开篇时讲的关于如何使用注解*@EnableSpringSecurity？注释给的方法是在一个实现了抽象类的配置类中用该注解，并且重写configure*方法，于是，在这里就用到了，方法会以httpSecurity作为配置对象并实现安全机制。\n小结以上梳理了SpringSecurity为何能做到开箱即用，主要是自定义的配置在何处生效的。然而还有相当多的地方没有讲解到，以后逐一梳理。\n","dateCreated":"2021-03-22T22:18:10+08:00","dateModified":"2021-03-23T23:15:59+08:00","datePublished":"2021-03-22T22:18:10+08:00","description":"​        最近有设计权限模块，用到了Spring Security，在SpringBoot项目中导入了相关的jar包后几乎不用做任何配置（当然，除了启用的*@EnableWebSecurity*）就会拦截请求，达到了“安全“的目的，配置的方式也是多种多样，我们先从”方便使用“这个角度，看看他如何做到的”拆箱即用“。","headline":"Spring Security AutoConfiguration","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"http://github.com/sebastian/about/2021/03/22/Spring-Security-AutoConfiguration/"},"publisher":{"@type":"Organization","name":"Sebastian Getts","sameAs":["https://github.com/Sebastian-Getts","zzzqsw@gmail.com"],"image":"avatar.png","logo":{"@type":"ImageObject","url":"avatar.png"}},"url":"http://github.com/sebastian/about/2021/03/22/Spring-Security-AutoConfiguration/","keywords":"spring security"}</script>
    <meta name="description" content="​        最近有设计权限模块，用到了Spring Security，在SpringBoot项目中导入了相关的jar包后几乎不用做任何配置（当然，除了启用的*@EnableWebSecurity*）就会拦截请求，达到了“安全“的目的，配置的方式也是多种多样，我们先从”方便使用“这个角度，看看他如何做到的”拆箱即用“。">
<meta property="og:type" content="blog">
<meta property="og:title" content="Spring Security AutoConfiguration">
<meta property="og:url" content="http://github.com/sebastian/about/2021/03/22/Spring-Security-AutoConfiguration/index.html">
<meta property="og:site_name" content="Hola">
<meta property="og:description" content="​        最近有设计权限模块，用到了Spring Security，在SpringBoot项目中导入了相关的jar包后几乎不用做任何配置（当然，除了启用的*@EnableWebSecurity*）就会拦截请求，达到了“安全“的目的，配置的方式也是多种多样，我们先从”方便使用“这个角度，看看他如何做到的”拆箱即用“。">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-03-22T14:18:10.000Z">
<meta property="article:modified_time" content="2021-03-23T15:15:59.311Z">
<meta property="article:author" content="Sebastian Getts">
<meta property="article:tag" content="spring security">
<meta name="twitter:card" content="summary">
    
    
        
    
    
        <meta property="og:image" content="http://github.com/sebastian/about/assets/images/avatar.png"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-xsmpikcbczzhpff1zqybzgesjqcgmkdkx9b5ntr0bkmk6wqucpktuaodiuvy.min.css">

    <!--STYLES END-->
    

    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Hola
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/avatar.png" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="Read more about the author"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/avatar.png" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">Sebastian Getts</h4>
                
                    <h5 class="sidebar-profile-bio"><p>I write code to enrich and ease life of others.</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="Categories"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="Tags"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="Archives"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/Sebastian-Getts"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/zzzqsw@gmail.com"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Spring Security AutoConfiguration
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2021-03-22T22:18:10+08:00">
	
		    Mar 22, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/framework/">framework</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p>​        最近有设计权限模块，用到了<em>Spring Security</em>，在SpringBoot项目中导入了相关的jar包后几乎不用做任何配置（当然，除了启用的*@EnableWebSecurity*）就会拦截请求，达到了“安全“的目的，配置的方式也是多种多样，我们先从”方便使用“这个角度，看看他如何做到的”拆箱即用“。</p>
<a id="more"></a>

<h1 id="table-of-contents">Table of Contents</h1><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%A5%E5%8F%A3"><span class="toc-text">入口</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%B1%BB"><span class="toc-text">配置类</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#setFilterChainProxySecurityConfigurer"><span class="toc-text">setFilterChainProxySecurityConfigurer</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#getWebSecurityConfigurers"><span class="toc-text">getWebSecurityConfigurers</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#apply"><span class="toc-text">apply</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#springSecurityFilterChain"><span class="toc-text">springSecurityFilterChain</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#init"><span class="toc-text">init</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#getHttp"><span class="toc-text">getHttp</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-text">小结</span></a></li></ol>

<h1 id="入口"><a href="#入口" class="headerlink" title="入口"></a>入口</h1><p>​        在SpringBoot中使用注解来解放xml配置文件后，一直都是*@Configuration<em>的天下，开启一个模块的功能同样需要它。开头提到的那个注解</em>@EnableWebSecurity*就是探究的入口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Retention(value = java.lang.annotation.RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(value = &#123; java.lang.annotation.ElementType.TYPE &#125;)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Import(&#123; WebSecurityConfiguration.class,</span></span><br><span class="line"><span class="meta">		SpringWebMvcImportSelector.class,</span></span><br><span class="line"><span class="meta">		OAuth2ImportSelector.class &#125;)</span></span><br><span class="line"><span class="meta">@EnableGlobalAuthentication</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> EnableWebSecurity &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Controls debugging support for Spring Security. Default is false.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> if true, enables debug support with Spring Security</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">boolean</span> <span class="title">debug</span><span class="params">()</span> <span class="keyword">default</span> <span class="keyword">false</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们看到通过*@Import(…)<em>导入了三个class，后两个都是以</em>Selector<em>结尾，在命名规范的Spring源码中大概是可以猜出内容的：根据某个条件选择性地加载类，也就是动态地</em>@Import(…)<em>，这里我们不去关注Selector，从”方便使用“的角度，我们是来探究开箱即用的，所以着重看下第一个</em>WebSecurityConfiguration*配置类。</p>
<p>在进入第一个配置类之前有必要看一下这个注解的注释信息：</p>
<blockquote>
<p>Add this annotation to an @Configuration class to have the Spring Security configuration defined in any WebSecurityConfigurer or more likely by extending the WebSecurityConfigurerAdapter base class and overriding individual methods</p>
</blockquote>
<p>告诉了我们如何使用以及自定义安全规则，那么使用起来应该是这样：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyWebSecurityConfiguration</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">confugre</span><span class="params">(HttpSecurity httpSecurity)</span></span>&#123;</span><br><span class="line">        <span class="comment">// ....</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>下面我们进入配置类。</p>
<h1 id="配置类"><a href="#配置类" class="headerlink" title="配置类"></a>配置类</h1><p>Spring Security从来不是单独存在的，正如他的名字一般，前面是有Spring的，Spring的核心就是IoC，所以，配置也是一样，一定会从把各个bean交代给容器。我们来看看他都做了啥。一进入类中，注释就讲得明明白白：</p>
<blockquote>
<p>Uses a WebSecurity to create the FilterChainProxy that performs the web based security for Spring Security. It then exports the necessary beans. Customizations can be made to WebSecurity by extending WebSecurityConfigurerAdapter and exposing it as a Configuration or implementing WebSecurityConfigurer and exposing it as a Configuration. This configuration is imported when using EnableWebSecurity.</p>
</blockquote>
<p>我们都知道web请求是典型的责任链，或者说是过滤器链，在这个配置类中就注册了过滤器的持有类和相关配置，先看看他的准备工作：</p>
<h2 id="setFilterChainProxySecurityConfigurer"><a href="#setFilterChainProxySecurityConfigurer" class="headerlink" title="setFilterChainProxySecurityConfigurer"></a>setFilterChainProxySecurityConfigurer</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired(required = false)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFilterChainProxySecurityConfigurer</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    // 入参一</span></span></span><br><span class="line"><span class="function"><span class="params">    ObjectPostProcessor&lt;Object&gt; objectPostProcessor,</span></span></span><br><span class="line"><span class="function"><span class="params">    // 入参二</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="meta">@Value(&quot;#&#123;@autowiredWebSecurityConfigurersIgnoreParents.getWebSecurityConfigurers()&#125;&quot;)</span> List&lt;SecurityConfigurer&lt;Filter, WebSecurity&gt;&gt; webSecurityConfigurers)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    webSecurity = objectPostProcessor</span><br><span class="line">        .postProcess(<span class="keyword">new</span> WebSecurity(objectPostProcessor));</span><br><span class="line">    <span class="keyword">if</span> (debugEnabled != <span class="keyword">null</span>) &#123;</span><br><span class="line">        webSecurity.debug(debugEnabled);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    webSecurityConfigurers.sort(AnnotationAwareOrderComparator.INSTANCE);</span><br><span class="line"></span><br><span class="line">    Integer previousOrder = <span class="keyword">null</span>;</span><br><span class="line">    Object previousConfig = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">for</span> (SecurityConfigurer&lt;Filter, WebSecurity&gt; config : webSecurityConfigurers) &#123;</span><br><span class="line">        Integer order = AnnotationAwareOrderComparator.lookupOrder(config);</span><br><span class="line">        <span class="keyword">if</span> (previousOrder != <span class="keyword">null</span> &amp;&amp; previousOrder.equals(order)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(</span><br><span class="line">                <span class="string">&quot;@Order on WebSecurityConfigurers must be unique. Order of &quot;</span></span><br><span class="line">                + order + <span class="string">&quot; was already used on &quot;</span> + previousConfig + <span class="string">&quot;, so it cannot be used on &quot;</span></span><br><span class="line">                + config + <span class="string">&quot; too.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        previousOrder = order;</span><br><span class="line">        previousConfig = config;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (SecurityConfigurer&lt;Filter, WebSecurity&gt; webSecurityConfigurer : webSecurityConfigurers) &#123;</span><br><span class="line">        <span class="comment">// 遍历webSecurityConfigures，执行webSecurity的apply</span></span><br><span class="line">        webSecurity.apply(webSecurityConfigurer);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 将confugures赋给势力变量</span></span><br><span class="line">    <span class="keyword">this</span>.webSecurityConfigurers = webSecurityConfigurers;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="getWebSecurityConfigurers"><a href="#getWebSecurityConfigurers" class="headerlink" title="getWebSecurityConfigurers"></a>getWebSecurityConfigurers</h3><p>入参二是有些奇怪的，实际上是执行了类<code>AutowiredWebSecurityConfigurersIgnoreParents</code>中的静态方法<em>getWebSecurityConfigurers</em>，目的是从上下文中获取到configures：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;SecurityConfigurer&lt;Filter, WebSecurity&gt;&gt; getWebSecurityConfigurers() &#123;</span><br><span class="line">   List&lt;SecurityConfigurer&lt;Filter, WebSecurity&gt;&gt; webSecurityConfigurers = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">   Map&lt;String, WebSecurityConfigurer&gt; beansOfType = beanFactory</span><br><span class="line">         .getBeansOfType(WebSecurityConfigurer.class);</span><br><span class="line">   <span class="keyword">for</span> (Entry&lt;String, WebSecurityConfigurer&gt; entry : beansOfType.entrySet()) &#123;</span><br><span class="line">      webSecurityConfigurers.add(entry.getValue());</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> webSecurityConfigurers;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="apply"><a href="#apply" class="headerlink" title="apply"></a>apply</h3><p>这里的apply是配置类中的属性webSecurity执行的，方法内实际的操作是”添加“，即把configures添加到容器中做保存，相当与是为webSecurity的属性赋值了。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> &lt;C extends SecurityConfigurer&lt;O, B&gt;&gt; <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(C configurer)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">synchronized</span> (configurers) &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        List&lt;SecurityConfigurer&lt;O, B&gt;&gt; configs = allowConfigurersOfSameType ? <span class="keyword">this</span>.configurers</span><br><span class="line">            .get(clazz) : <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (configs == <span class="keyword">null</span>) &#123;</span><br><span class="line">            configs = <span class="keyword">new</span> ArrayList&lt;&gt;(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        configs.add(configurer);</span><br><span class="line">        <span class="comment">// private final LinkedHashMap&lt;Class&lt;? extends SecurityConfigurer&lt;O, B&gt;&gt;, List&lt;SecurityConfigurer&lt;O, B&gt;&gt;&gt; configurers = new LinkedHashMap&lt;&gt;();</span></span><br><span class="line">        <span class="keyword">this</span>.configurers.put(clazz, configs);</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>要知道，我们在<em>入口</em>处提到的用法，是在一个继承了抽象类的类上使用注解，并可以自定义安全规则，那个抽象类就是一个<em>WebSecurityConfigurer</em>，他实现了接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">WebSecurityConfigurerAdapter</span> <span class="keyword">implements</span> <span class="title">WebSecurityConfigurer</span>&lt;<span class="title">WebSecurity</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>所以可以总结一下这个方法：在这个配置类的这一方法中，我们实现的configurer会被方法<em>getWebSecurityConfigurers</em>从上下文中取出，经过排序等操作后填充至webSecurity的属性中保存。</p>
<h2 id="springSecurityFilterChain"><a href="#springSecurityFilterChain" class="headerlink" title="springSecurityFilterChain"></a>springSecurityFilterChain</h2><p>准备工作之后是过滤器链。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 	public static final String DEFAULT_FILTER_NAME = &quot;springSecurityFilterChain&quot;;</span></span><br><span class="line"><span class="meta">@Bean(name = AbstractSecurityWebApplicationInitializer.DEFAULT_FILTER_NAME)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Filter <span class="title">springSecurityFilterChain</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">// 在上个方法中有给属性赋值，我们有继承的话 这里不为空，即true</span></span><br><span class="line">    <span class="keyword">boolean</span> hasConfigurers = webSecurityConfigurers != <span class="keyword">null</span></span><br><span class="line">        &amp;&amp; !webSecurityConfigurers.isEmpty();</span><br><span class="line">    <span class="keyword">if</span> (!hasConfigurers) &#123;</span><br><span class="line">        <span class="comment">// 为空的话新建一个</span></span><br><span class="line">        WebSecurityConfigurerAdapter adapter = objectObjectPostProcessor</span><br><span class="line">            .postProcess(<span class="keyword">new</span> WebSecurityConfigurerAdapter() &#123;</span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="comment">// 再次执行apply</span></span><br><span class="line">        webSecurity.apply(adapter);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 不为空的话 会直接执行这里的build方法</span></span><br><span class="line">    <span class="keyword">return</span> webSecurity.build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>到这里我们可以大致猜测他后续的步骤，最上面的demo中方法是configure，入参是httpSecurity，所以过滤器链也会与这些对象和方法有关，build也应该是构建过滤器链的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> AtomicBoolean building = <span class="keyword">new</span> AtomicBoolean();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> O <span class="title">build</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">// 这里对build方法用了自旋CAS防止重复构建</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.building.compareAndSet(<span class="keyword">false</span>, <span class="keyword">true</span>)) &#123;</span><br><span class="line">        <span class="keyword">this</span>.object = doBuild();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.object;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> AlreadyBuiltException(<span class="string">&quot;This object has already been built&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在*doBuild()*方法里用到了模板方法模式，同SpringBoot启动时做的refresh一样，给开发者留了余地，在构建前后都能实现一些方法，我们这里着重看看他内部实现了的。</p>
<h3 id="init"><a href="#init" class="headerlink" title="init"></a>init</h3><p>初始化，方法中会遍历configurer，其中包括我们自己实现的（假设我们继承了WebSecurityAdapter），那我们来看看init做了啥：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">final</span> WebSecurity web)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">// 获取httpSecurity</span></span><br><span class="line">    <span class="keyword">final</span> HttpSecurity http = getHttp();</span><br><span class="line">    <span class="comment">// web是webSecurity的一个实例变量，通过获取的httpSecurity为其属性赋值</span></span><br><span class="line">    web.addSecurityFilterChainBuilder(http).postBuildAction(() -&gt; &#123;</span><br><span class="line">        FilterSecurityInterceptor securityInterceptor = http</span><br><span class="line">            .getSharedObject(FilterSecurityInterceptor.class);</span><br><span class="line">        web.securityInterceptor(securityInterceptor);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="getHttp"><a href="#getHttp" class="headerlink" title="getHttp"></a>getHttp</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">final</span> HttpSecurity <span class="title">getHttp</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (http != <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> http;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   AuthenticationEventPublisher eventPublisher = getAuthenticationEventPublisher();</span><br><span class="line">   localConfigureAuthenticationBldr.authenticationEventPublisher(eventPublisher);</span><br><span class="line"></span><br><span class="line">   AuthenticationManager authenticationManager = authenticationManager();</span><br><span class="line">   authenticationBuilder.parentAuthenticationManager(authenticationManager);</span><br><span class="line">   Map&lt;Class&lt;?&gt;, Object&gt; sharedObjects = createSharedObjects();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 生成对象</span></span><br><span class="line">   http = <span class="keyword">new</span> HttpSecurity(objectPostProcessor, authenticationBuilder,</span><br><span class="line">         sharedObjects);</span><br><span class="line">    <span class="comment">// 默认的话 会生产默认的安全策略。就相当与我们什么都没有配置</span></span><br><span class="line">   <span class="keyword">if</span> (!disableDefaults) &#123;</span><br><span class="line">      <span class="comment">// @formatter:off</span></span><br><span class="line">      http</span><br><span class="line">         .csrf().and()</span><br><span class="line">         .addFilter(<span class="keyword">new</span> WebAsyncManagerIntegrationFilter())</span><br><span class="line">         .exceptionHandling().and()</span><br><span class="line">         .headers().and()</span><br><span class="line">         .sessionManagement().and()</span><br><span class="line">         .securityContext().and()</span><br><span class="line">         .requestCache().and()</span><br><span class="line">         .anonymous().and()</span><br><span class="line">         .servletApi().and()</span><br><span class="line">         .apply(<span class="keyword">new</span> DefaultLoginPageConfigurer&lt;&gt;()).and()</span><br><span class="line">         .logout();</span><br><span class="line">      <span class="comment">// @formatter:on</span></span><br><span class="line">      ClassLoader classLoader = <span class="keyword">this</span>.context.getClassLoader();</span><br><span class="line">      List&lt;AbstractHttpConfigurer&gt; defaultHttpConfigurers =</span><br><span class="line">            SpringFactoriesLoader.loadFactories(AbstractHttpConfigurer.class, classLoader);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> (AbstractHttpConfigurer configurer : defaultHttpConfigurers) &#123;</span><br><span class="line">         http.apply(configurer);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">    <span class="comment">// 配置httpSecurity</span></span><br><span class="line">   configure(http);</span><br><span class="line">   <span class="keyword">return</span> http;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的方法中在返回httpSecurity对象之前会执行<em>configure</em>方法，是否记得demo以及开篇时讲的关于如何使用注解*@EnableSpringSecurity<em>？注释给的方法是在一个实现了抽象类的配置类中用该注解，并且重写</em>configure*方法，于是，在这里就用到了，方法会以httpSecurity作为配置对象并实现安全机制。</p>
<h1 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h1><p>以上梳理了SpringSecurity为何能做到开箱即用，主要是自定义的配置在何处生效的。然而还有相当多的地方没有讲解到，以后逐一梳理。</p>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-none-link" href="/tags/spring-security/" rel="tag">spring security</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2021/03/23/jvm-classloader/"
                    data-tooltip="jvm classloader"
                    aria-label="PREVIOUS: jvm classloader"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2021/03/09/mybatis-autoconfiguration/"
                    data-tooltip="mybatis autoconfiguration"
                    aria-label="NEXT: mybatis autoconfiguration"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://github.com/sebastian/about/2021/03/22/Spring-Security-AutoConfiguration/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=http://github.com/sebastian/about/2021/03/22/Spring-Security-AutoConfiguration/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=http://github.com/sebastian/about/2021/03/22/Spring-Security-AutoConfiguration/"
                    title="Share on Google+"
                    aria-label="Share on Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="Table of Contents">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2021 Sebastian Getts. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2021/03/23/jvm-classloader/"
                    data-tooltip="jvm classloader"
                    aria-label="PREVIOUS: jvm classloader"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2021/03/09/mybatis-autoconfiguration/"
                    data-tooltip="mybatis autoconfiguration"
                    aria-label="NEXT: mybatis autoconfiguration"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://github.com/sebastian/about/2021/03/22/Spring-Security-AutoConfiguration/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=http://github.com/sebastian/about/2021/03/22/Spring-Security-AutoConfiguration/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=http://github.com/sebastian/about/2021/03/22/Spring-Security-AutoConfiguration/"
                    title="Share on Google+"
                    aria-label="Share on Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="Table of Contents">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="4">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=http://github.com/sebastian/about/2021/03/22/Spring-Security-AutoConfiguration/"
                        aria-label="Share on Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Share on Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=http://github.com/sebastian/about/2021/03/22/Spring-Security-AutoConfiguration/"
                        aria-label="Share on Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://plus.google.com/share?url=http://github.com/sebastian/about/2021/03/22/Spring-Security-AutoConfiguration/"
                        aria-label="Share on Google+"
                    >
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>Share on Google+</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/avatar.png" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">Sebastian Getts</h4>
        
            <div id="about-card-bio"><p>I write code to enrich and ease life of others.</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Software Engineer</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                Shenzhen China
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover-v1.2.0.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-jsoeqoqa2ajw9nwj0xf5gmftvb2jhopk3sxu8iodabvev2jdlmr0zsitv3jm.min.js"></script>

<!--SCRIPTS END-->


    




    </body>
</html>
