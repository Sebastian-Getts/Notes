
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hola">
    <title>vue04 - Hola</title>
    <meta name="author" content="Sebastian Getts">
    
    
    
        
            <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
        
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Sebastian Getts","sameAs":["https://github.com/sebastian-getts/","mailto"],"image":"avatar.jpg"},"articleBody":"vue的与后端交互。\n\n\n序\n前后端交互模式\npromise用法\n接口调用-fech用法\n接口调用-axios用法\n接口与调用-async/await用法\n\n接口调用方式原生：\n\najax\n基于jQuery的ajax\n\nnew：\n\nfetch\naxios\n\nresful形式的urlhttp请求方式\n\nGET 查询\nPOST 添加\nPUT 修改\nDELETE 删除\n\n符合规则的url\n\nhttp://www.hello.com/books GET, POST\nhttp://www.hello.com/books/1284 PUT, DELTE\n\nnote: 传统的url传送数据依赖JSON，与请求方式无关。\nPromise异步编程的一种解决方案，语法上来讲，，promise是一个对象，可以获取异步操作的消息。official site\n优点：\n\n避免多层异步调用嵌套问题（回调地狱）\npromise对象提供了简洁的api\n\n基本用法\n实例化Promise对象，构造函数中传递函数，用于处理异步任务\nresolve和reject两个参数用于处理成功和失败两种情况，并通过p.then获取处理结果\n\n123456789var p = new Promise(function(resolve, reject)&#123;    //invoke resovle() when success    //inovke reject() when fail&#125;);p.then(function(ret)&#123;    //get info from resolve&#125;, function(ret)&#123;    //get info from reject&#125;);\n\n常用apiapi方法\np.then() 得到异步任务的正确结果\np.catch() 获取异常信息\np.finally() 成功与否都会执行\n\n12345678910queryData().then(function(data)&#123;    console.log(data);;&#125;).catch(function(data)&#123;    console.logg(data);&#125;).finally(function()&#123;    cosnole.log(&#x27;finished&#x27;);&#125;)\n\n对象方法\npromise.all() 并发处理多个异步任务，所有任务都完成才能得到结果\npromise.race() 并发处理多个任务，只要有一个任务完成救就能得到结果\n\n1234567Promise.all([p1,p2,p3]).then((result)=&gt;&#123;    console.log(result)&#125;)Promise.race([p1, p2, p3]).then((result) =&gt; &#123;    console.log(result)&#125;)\n\nfetch传统ajax的升级版，基于promise来实现。\n语法1234fetch(url).then(fn2)          .then(fn3)          ...          .cathc(fn)\n\n123456fetch(&#x27;/abc&#x27;).then(data=&gt;&#123;    return data.text();&#125;).then(ret=&gt;&#123;    //final data    console.log(ret);&#125;)\n\nnote: text()方法属于fetch API的一部分，它返回一个promise实例对象，用于获取后台返回的数据。\n常用配置选项\nmethod(String): Http request, defautl GET\nbody(String): Http reqeust parameters\nheader(Object): Http request header, defualt {}\n\n1234567fetch(&#x27;/abc&#x27;, &#123;    method: &#x27;get&#x27;&#125;).then(data=&gt;&#123;    return data.text();&#125;).then(ret=&gt;&#123;    console.log(ret);&#125;)\n\nGET/DELTE\ntranditional:\n\n12345fetch(&#x27;/abc?id=123&#x27;).then(data=&gt;&#123;    return data.text();&#125;).then(ret=&gt;&#123;    console.log(ret);&#125;)\n\n\nrestful:\n\n1234567fetch(&#x27;/abc/123&#x27;,&#123;    method: &#x27;get&#x27;&#125;).then(data=&gt;&#123;    return data.text();&#125;).then(ret=&gt;&#123;    console.log(ret);&#125;)\n\n\n\nPOST/PUT12345678910111213141516fetch(&#x27;/books/,&#123;      method: &#x27;post&#x27;,      //body: &#x27;uname=list&amp;pwd=123&#x27;,      body: JOSN.stringify(&#123;          uname: &#x27;lisa&#x27;,          pwd: &#x27;123&#x27;      &#125;)      headers:&#123;          //&#x27;Content-Type&#x27;: &#x27;application/x-www-form-urlencoded&#x27;,          &#x27;Content-Type&#x27;:&#x27;application/json&#x27;      &#125;      &#125;).then(data=&gt;&#123;          return data.text();      &#125;).then(ret=&gt;&#123;          console.log(ret);      &#125;)\n\n\n\n响应数据格式\ntext(): 将返回体处理成字符串类型\njson(): 返回结果和JSON.parse(responseText)一样\n\naxiosreferece official site\n特点：\n\n支持浏览器和node.js\n支持promise\n能拦截请求和响应\n自动转换JSON数据\n\n基本用法1234axios.get(&#x27;/data&#x27;)    .then(ret=&gt;&#123;    console.log(ret.data)&#125;)\n\n使用前需要引入\n1&lt;script type=&quot;text/ajvascript&quot; src=&quot;js/axios.js&quot;&gt;&lt;/script&gt;\n\n常用APIGET/DELETE\n通过url传参\n通过params传参\n\n1234axios.get(&#x27;/data?id=123&#x27;)    .then(ret=&gt;&#123;    coonsole.log(ret.data)&#125;)\n\n1234axios.get(&#x27;/data/24&#x27;)    .then(ret=&gt;&#123;    console.log(ret.data)&#125;)\n\n12345678axios.get(&#x27;/data&#x27;,&#123;    params:&#123;        id:123    &#125;&#125;).then(ret=&gt;&#123;    console.log(ret.data)&#125;)\n\n\n\nPOST/PUT\n通过选项传递参数（默认传递的是json格式的数据）\n\n123456axios.post(&#x27;/data&#x27;,&#123;    uname: &#x27;tom&#x27;,    pwd: 123&#125;).then(ret=&gt;&#123;    console.log(ret.data)&#125;)\n\n\n通过URLSearchParams传递参数\n\n123456const params = new URLSearchParams();params.append(&#x27;param1&#x27;,&#x27;value1&#x27;);params.append(&#x27;param2&#x27;, &#x27;value2&#x27;);axios.post(&#x27;/api/test&#x27;, params).then(ret=&gt;&#123;    console.log(ret.data)&#125;)\n\n响应结果\ndata(json形式)\nheaders\nstatus\nstatusText\n\n全局配置\naxios.default.timeout = 3000;//ms, 超时时间\naxios.default.baseURL = “http://localhost:3000/app&quot;;//默认地址的前部分\naxios.default.headers[ ‘mytoken’ ] = “adf1844934nadfnaodn02”; //设置请求头\n\n1234&lt;body&gt;    axios.default.baseURL = &#x27;http://localhost:3000/&#x27;;    ...&lt;/body&gt;\n\n\n\n拦截器请求拦截器在请求发出去之前设置一些信息\n12345axios.interceptors.request.use(function(config)&#123;    return config;&#125;. function(err)&#123;                               &#125;)\n\n响应拦截器在获取数据之前对数据做一些加工处理\n12345axios.interceptors.response.use(function(res)&#123;    return res;&#125;, function(err)&#123;    &#125;)\n\nasync/awaitES7引入的新语法，可以更加方便的进行异步操作。\nasync关键字用于函数上，await关键字用于async函数中。\n12345678async function queryData(id)&#123;    const ret = await axios.get(&#x27;/data&#x27;);    return ret;&#125;queryData.then(ret=&gt;&#123;    console.log(ret)&#125;)\n\n处理多个异步123456789async function queryData()&#123;    var ino = await axios.get(&#x27;async1&#x27;);    var ret = await axios.get(&#x27;async2&#x27; + info.data);    return ret.data;&#125;queryData().then(function(data)&#123;    console.log(data)&#125;)\n\n","dateCreated":"2020-01-19T15:07:46+08:00","dateModified":"2020-07-20T01:29:13+08:00","datePublished":"2020-01-19T15:07:46+08:00","description":"vue的与后端交互。","headline":"vue04","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"http://github.com/sebastian/about/2020/01/19/vue04/"},"publisher":{"@type":"Organization","name":"Sebastian Getts","sameAs":["https://github.com/sebastian-getts/","mailto"],"image":"avatar.jpg","logo":{"@type":"ImageObject","url":"avatar.jpg"}},"url":"http://github.com/sebastian/about/2020/01/19/vue04/","keywords":"vue"}</script>
    <meta name="description" content="vue的与后端交互。">
<meta property="og:type" content="blog">
<meta property="og:title" content="vue04">
<meta property="og:url" content="http://github.com/sebastian/about/2020/01/19/vue04/index.html">
<meta property="og:site_name" content="Hola">
<meta property="og:description" content="vue的与后端交互。">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-01-19T07:07:46.000Z">
<meta property="article:modified_time" content="2020-07-19T17:29:13.366Z">
<meta property="article:author" content="Sebastian Getts">
<meta property="article:tag" content="vue">
<meta name="twitter:card" content="summary">
    
    
        
    
    
        <meta property="og:image" content="http://github.com/sebastian/about/assets/images/avatar.jpg"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-spzjrm9no8kcbknku5bsn1dr9dpp94iq1g86qdztxtoqwlgtrnwyi2tucypv.min.css">

    <!--STYLES END-->
    

    
    <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?3e3b025a15329c47fcc47a83f6160356";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
    </script>


    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/%20"
            aria-label=""
        >
            Hola
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/avatar.jpg" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="Read more about the author"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/avatar.jpg" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">Sebastian Getts</h4>
                
                    <h5 class="sidebar-profile-bio"><p>I write code to enrich and ease life of others. 0 errors, 0 warnings.</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="Categories"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="Tags"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="Archives"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="Search"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/sebastian-getts/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/mailto"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            vue04
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2020-01-19T15:07:46+08:00">
	
		    Jan 19, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Vue/">Vue</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p>vue的与后端交互。</p>
<a id="more"></a>

<h1 id="序"><a href="#序" class="headerlink" title="序"></a>序</h1><ul>
<li>前后端交互模式</li>
<li>promise用法</li>
<li>接口调用-fech用法</li>
<li>接口调用-axios用法</li>
<li>接口与调用-async/await用法</li>
</ul>
<h1 id="接口调用方式"><a href="#接口调用方式" class="headerlink" title="接口调用方式"></a>接口调用方式</h1><p>原生：</p>
<ul>
<li>ajax</li>
<li>基于jQuery的ajax</li>
</ul>
<p>new：</p>
<ul>
<li>fetch</li>
<li>axios</li>
</ul>
<h2 id="resful形式的url"><a href="#resful形式的url" class="headerlink" title="resful形式的url"></a>resful形式的url</h2><p>http请求方式</p>
<ul>
<li>GET 查询</li>
<li>POST 添加</li>
<li>PUT 修改</li>
<li>DELETE 删除</li>
</ul>
<p>符合规则的url</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://www.hello.com/books">http://www.hello.com/books</a> GET, POST</li>
<li><a target="_blank" rel="noopener" href="http://www.hello.com/books/1284">http://www.hello.com/books/1284</a> PUT, DELTE</li>
</ul>
<p>note: 传统的url传送数据依赖JSON，与请求方式无关。</p>
<h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><p>异步编程的一种解决方案，语法上来讲，，promise是一个对象，可以获取异步操作的消息。<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Promise">official site</a></p>
<p>优点：</p>
<ul>
<li>避免多层异步调用嵌套问题（<strong>回调地狱</strong>）</li>
<li>promise对象提供了简洁的api</li>
</ul>
<h3 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h3><ul>
<li>实例化Promise对象，构造函数中传递函数，用于处理异步任务</li>
<li><code>resolve</code>和<code>reject</code>两个参数用于处理成功和失败两种情况，并通过p.then获取处理结果</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//invoke resovle() when success</span></span><br><span class="line">    <span class="comment">//inovke reject() when fail</span></span><br><span class="line">&#125;);</span><br><span class="line">p.then(<span class="function"><span class="keyword">function</span>(<span class="params">ret</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//get info from resolve</span></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">ret</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//get info from reject</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="常用api"><a href="#常用api" class="headerlink" title="常用api"></a>常用api</h3><h4 id="api方法"><a href="#api方法" class="headerlink" title="api方法"></a>api方法</h4><ul>
<li>p.then() 得到异步任务的正确结果</li>
<li>p.catch() 获取异常信息</li>
<li>p.finally() 成功与否都会执行</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">queryData()</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);;</span><br><span class="line">&#125;)</span><br><span class="line">.catch(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.logg(data);</span><br><span class="line">&#125;)</span><br><span class="line">.finally(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    cosnole.log(<span class="string">&#x27;finished&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="对象方法"><a href="#对象方法" class="headerlink" title="对象方法"></a>对象方法</h4><ul>
<li>promise.all() 并发处理多个异步任务，所有任务都完成才能得到结果</li>
<li>promise.race() 并发处理多个任务，只要有一个任务完成救就能得到结果</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.all([p1,p2,p3]).then(<span class="function">(<span class="params">result</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(result)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.race([p1, p2, p3]).then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(result)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="fetch"><a href="#fetch" class="headerlink" title="fetch"></a>fetch</h2><p>传统ajax的升级版，基于promise来实现。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fetch(url).then(fn2)</span><br><span class="line">          .then(fn3)</span><br><span class="line">          ...</span><br><span class="line">          .cathc(fn)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">&#x27;/abc&#x27;</span>).then(<span class="function"><span class="params">data</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> data.text();</span><br><span class="line">&#125;).then(<span class="function"><span class="params">ret</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//final data</span></span><br><span class="line">    <span class="built_in">console</span>.log(ret);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>note</strong>: text()方法属于fetch API的一部分，它返回一个promise实例对象，用于获取后台返回的数据。</p>
<h3 id="常用配置选项"><a href="#常用配置选项" class="headerlink" title="常用配置选项"></a>常用配置选项</h3><ul>
<li>method(String): Http request, defautl <em>GET</em></li>
<li>body(String): Http reqeust parameters</li>
<li>header(Object): Http request header, defualt {}</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">&#x27;/abc&#x27;</span>, &#123;</span><br><span class="line">    method: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">&#125;).then(<span class="function"><span class="params">data</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> data.text();</span><br><span class="line">&#125;).then(<span class="function"><span class="params">ret</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(ret);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="GET-DELTE"><a href="#GET-DELTE" class="headerlink" title="GET/DELTE"></a>GET/DELTE</h4><ul>
<li>tranditional:</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">&#x27;/abc?id=123&#x27;</span>).then(<span class="function"><span class="params">data</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> data.text();</span><br><span class="line">&#125;).then(<span class="function"><span class="params">ret</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(ret);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>restful:</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">&#x27;/abc/123&#x27;</span>,&#123;</span><br><span class="line">    method: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">&#125;).then(<span class="function"><span class="params">data</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> data.text();</span><br><span class="line">&#125;).then(<span class="function"><span class="params">ret</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(ret);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h4 id="POST-PUT"><a href="#POST-PUT" class="headerlink" title="POST/PUT"></a>POST/PUT</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">&#x27;/books/,&#123;</span></span><br><span class="line"><span class="string">      method: &#x27;</span>post<span class="string">&#x27;,</span></span><br><span class="line"><span class="string">      //body: &#x27;</span>uname=list&amp;pwd=<span class="number">123</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">      body: JOSN.stringify(&#123;</span></span><br><span class="line"><span class="string">          uname: &#x27;</span>lisa<span class="string">&#x27;,</span></span><br><span class="line"><span class="string">          pwd: &#x27;</span><span class="number">123</span><span class="string">&#x27;</span></span><br><span class="line"><span class="string">      &#125;)</span></span><br><span class="line"><span class="string">      headers:&#123;</span></span><br><span class="line"><span class="string">          //&#x27;</span>Content-Type<span class="string">&#x27;: &#x27;</span>application/x-www-form-urlencoded<span class="string">&#x27;,</span></span><br><span class="line"><span class="string">          &#x27;</span>Content-Type<span class="string">&#x27;:&#x27;</span>application/json<span class="string">&#x27;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">      &#125;).then(data=&gt;&#123;</span></span><br><span class="line"><span class="string">          return data.text();</span></span><br><span class="line"><span class="string">      &#125;).then(ret=&gt;&#123;</span></span><br><span class="line"><span class="string">          console.log(ret);</span></span><br><span class="line"><span class="string">      &#125;)</span></span><br></pre></td></tr></table></figure>



<h3 id="响应数据格式"><a href="#响应数据格式" class="headerlink" title="响应数据格式"></a>响应数据格式</h3><ul>
<li>text(): 将返回体处理成字符串类型</li>
<li>json(): 返回结果和JSON.parse(responseText)一样</li>
</ul>
<h2 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h2><p>referece <a href="https://github.com/axios/axios">official site</a></p>
<p>特点：</p>
<ul>
<li>支持浏览器和node.js</li>
<li>支持promise</li>
<li>能拦截请求和响应</li>
<li>自动转换JSON数据</li>
</ul>
<h3 id="基本用法-1"><a href="#基本用法-1" class="headerlink" title="基本用法"></a>基本用法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">axios.get(<span class="string">&#x27;/data&#x27;</span>)</span><br><span class="line">    .then(<span class="function"><span class="params">ret</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(ret.data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>使用前需要引入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/ajvascript&quot;</span> src=<span class="string">&quot;js/axios.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="常用API"><a href="#常用API" class="headerlink" title="常用API"></a>常用API</h3><h4 id="GET-DELETE"><a href="#GET-DELETE" class="headerlink" title="GET/DELETE"></a>GET/DELETE</h4><ul>
<li>通过url传参</li>
<li>通过params传参</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">axios.get(<span class="string">&#x27;/data?id=123&#x27;</span>)</span><br><span class="line">    .then(<span class="function"><span class="params">ret</span>=&gt;</span>&#123;</span><br><span class="line">    coonsole.log(ret.data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">axios.get(<span class="string">&#x27;/data/24&#x27;</span>)</span><br><span class="line">    .then(<span class="function"><span class="params">ret</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(ret.data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">axios.get(<span class="string">&#x27;/data&#x27;</span>,&#123;</span><br><span class="line">    params:&#123;</span><br><span class="line">        id:<span class="number">123</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function"><span class="params">ret</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(ret.data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h4 id="POST-PUT-1"><a href="#POST-PUT-1" class="headerlink" title="POST/PUT"></a>POST/PUT</h4><ul>
<li>通过选项传递参数（默认传递的是json格式的数据）</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">axios.post(<span class="string">&#x27;/data&#x27;</span>,&#123;</span><br><span class="line">    uname: <span class="string">&#x27;tom&#x27;</span>,</span><br><span class="line">    pwd: <span class="number">123</span></span><br><span class="line">&#125;).then(<span class="function"><span class="params">ret</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(ret.data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>通过URLSearchParams传递参数</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> params = <span class="keyword">new</span> URLSearchParams();</span><br><span class="line">params.append(<span class="string">&#x27;param1&#x27;</span>,<span class="string">&#x27;value1&#x27;</span>);</span><br><span class="line">params.append(<span class="string">&#x27;param2&#x27;</span>, <span class="string">&#x27;value2&#x27;</span>);</span><br><span class="line">axios.post(<span class="string">&#x27;/api/test&#x27;</span>, params).then(<span class="function"><span class="params">ret</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(ret.data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="响应结果"><a href="#响应结果" class="headerlink" title="响应结果"></a>响应结果</h3><ul>
<li>data(json形式)</li>
<li>headers</li>
<li>status</li>
<li>statusText</li>
</ul>
<h3 id="全局配置"><a href="#全局配置" class="headerlink" title="全局配置"></a>全局配置</h3><ul>
<li>axios.default.timeout = 3000;//ms, 超时时间</li>
<li>axios.default.baseURL = “<a target="_blank" rel="noopener" href="http://localhost:3000/app&quot;;//%E9%BB%98%E8%AE%A4%E5%9C%B0%E5%9D%80%E7%9A%84%E5%89%8D%E9%83%A8%E5%88%86">http://localhost:3000/app&quot;;//默认地址的前部分</a></li>
<li>axios.default.headers[ ‘mytoken’ ] = “adf1844934nadfnaodn02”; //设置请求头</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    axios.default.baseURL = &#x27;http://localhost:3000/&#x27;;</span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h3><h4 id="请求拦截器"><a href="#请求拦截器" class="headerlink" title="请求拦截器"></a>请求拦截器</h4><p>在请求发出去之前设置一些信息</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">axios.interceptors.request.use(<span class="function"><span class="keyword">function</span>(<span class="params">config</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">&#125;. function(err)&#123;</span><br><span class="line">                               </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="响应拦截器"><a href="#响应拦截器" class="headerlink" title="响应拦截器"></a>响应拦截器</h4><p>在获取数据之前对数据做一些加工处理</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">axios.interceptors.response.use(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="async-await"><a href="#async-await" class="headerlink" title="async/await"></a>async/await</h2><p>ES7引入的新语法，可以更加方便的进行异步操作。</p>
<p>async关键字用于函数上，await关键字用于async函数中。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">queryData</span>(<span class="params">id</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> ret = <span class="keyword">await</span> axios.get(<span class="string">&#x27;/data&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">queryData.then(<span class="function"><span class="params">ret</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(ret)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="处理多个异步"><a href="#处理多个异步" class="headerlink" title="处理多个异步"></a>处理多个异步</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">queryData</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> ino = <span class="keyword">await</span> axios.get(<span class="string">&#x27;async1&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> ret = <span class="keyword">await</span> axios.get(<span class="string">&#x27;async2&#x27;</span> + info.data);</span><br><span class="line">    <span class="keyword">return</span> ret.data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">queryData().then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>


            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-none-link" href="/tags/vue/" rel="tag">vue</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2020/01/19/vue05/"
                    data-tooltip="vue05"
                    aria-label="PREVIOUS: vue05"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2020/01/18/vue03/"
                    data-tooltip="vue03"
                    aria-label="NEXT: vue03"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://service.weibo.com/share/share.php?&amp;title=http://github.com/sebastian/about/2020/01/19/vue04/"
                    title="Share on Weibo"
                    aria-label="Share on Weibo"
                >
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=http://github.com/sebastian/about/2020/01/19/vue04/&amp;title=vue04"
                    title="Share on QQ"
                    aria-label="Share on QQ"
                >
                    <i class="fab fa-qq" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://widget.renren.com/dialog/share?resourceUrl=http://github.com/sebastian/about/2020/01/19/vue04/"
                    title="Share on Renren"
                    aria-label="Share on Renren"
                >
                    <i class="fab fa-renren" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 Sebastian Getts. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2020/01/19/vue05/"
                    data-tooltip="vue05"
                    aria-label="PREVIOUS: vue05"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2020/01/18/vue03/"
                    data-tooltip="vue03"
                    aria-label="NEXT: vue03"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://service.weibo.com/share/share.php?&amp;title=http://github.com/sebastian/about/2020/01/19/vue04/"
                    title="Share on Weibo"
                    aria-label="Share on Weibo"
                >
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=http://github.com/sebastian/about/2020/01/19/vue04/&amp;title=vue04"
                    title="Share on QQ"
                    aria-label="Share on QQ"
                >
                    <i class="fab fa-qq" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://widget.renren.com/dialog/share?resourceUrl=http://github.com/sebastian/about/2020/01/19/vue04/"
                    title="Share on Renren"
                    aria-label="Share on Renren"
                >
                    <i class="fab fa-renren" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="4">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="http://service.weibo.com/share/share.php?&amp;title=http://github.com/sebastian/about/2020/01/19/vue04/"
                        aria-label="Share on Weibo"
                    >
                        <i class="fab fa-weibo" aria-hidden="true"></i><span>Share on Weibo</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="http://connect.qq.com/widget/shareqq/index.html?url=http://github.com/sebastian/about/2020/01/19/vue04/&amp;title=vue04"
                        aria-label="Share on QQ"
                    >
                        <i class="fab fa-qq" aria-hidden="true"></i><span>Share on QQ</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="http://widget.renren.com/dialog/share?resourceUrl=http://github.com/sebastian/about/2020/01/19/vue04/"
                        aria-label="Share on Renren"
                    >
                        <i class="fab fa-renren" aria-hidden="true"></i><span>Share on Renren</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/avatar.jpg" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">Sebastian Getts</h4>
        
            <div id="about-card-bio"><p>I write code to enrich and ease life of others. 0 errors, 0 warnings.</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Software Developer</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                Shenzhen
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover-v1.2.0.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-karbquxnkadaf4yf1hq6g6fyv6nvvrwpv3vf2u1wz8k7osddfqtxf5wbfcfg.min.js"></script>

<!--SCRIPTS END-->


    




    </body>
</html>
